{{/* gotype: entgo.io/ent/entc/gen.Graph */}}


{{ define "not_empty_updates" }}

	{{/* Add the base header for the generated file */}}
	{{ $pkg := base $.Config.Package }}
	{{ template "header" $ }}

	{{/* Loop over all updaters and implement the "SetNotEmpty" method for all optional fields */}}
	{{ range $n := $.Nodes }}
		{{ range $updater := list  $n.UpdateOneName }}
			// set all field if value is not empty. e.g. string does not equal to ""
			func ({{ $n.Receiver }} *{{ $updater }}) SetALLNotEmpty(v *{{ $n.Name }}) *{{ $updater }} {
				{{ range $f := $n.MutableFields  -}}
					{{ $set := print "Set" $f.StructField -}}
					{{ if or (eq $f.Type.Type 7) (gt $f.Type.Type 8) -}}
						if v.{{ $f.StructField }}  != {{if  $f.Type.Numeric  }} 0 {{ else if eq $f.Type.Type 7 }} "" {{ else if eq $f.Type.Type 7 }} {{end}}  {
							{{ $n.Receiver }}.{{ $set }}({{ if not $f.SupportsMutationAppend }}{{ end }}v.{{ $f.StructField }} )
						}
					{{ end -}}
				{{ end -}}
				return {{ $n.Receiver }}
			}
		{{ end }}
	{{ end }}
{{ end }}